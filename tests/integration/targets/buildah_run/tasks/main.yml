---
- name: BUILDAH | 1 - Test output of "buildah run  <image name> command" command
  mafalb.buildah.buildah_run:
    name: "{{ buildah_name }}"
    command: 'ls'
    args: ['-la', '/etc']
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | 2 - Test output of "buildah run  <image name> command" command
  mafalb.buildah.buildah_run:
    name: "{{ buildah_name }}"
    command: 'cat'
    args: '/etc/resolv.conf'
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: Add a shell script to the image
  mafalb.buildah.buildah_add:
    name: "{{ buildah_name }}"
    src: targets/buildah_run/files/runecho.sh
    dest: /usr/local/bin/runecho.sh
  register: add_result

- name: BUILDAH | 3 - Test output of "buildah run  <image name> command" command
  mafalb.buildah.buildah_run:
    name: "{{ buildah_name }}"
    command: 'chmod'
    args: ['a+r', '/usr/local/bin/runecho.sh']
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | 3 - Test output of "buildah run  <image name> command" command
  mafalb.buildah.buildah_run:
    name: "{{ buildah_name }}"
    command: 'chown'
    args: ['root:root', '/usr/local/bin/runecho.sh']
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | 3 - Test output of "buildah run  <image name> command" command
  mafalb.buildah.buildah_run:
    name: "{{ buildah_name }}"
    command: '/usr/local/bin/runecho.sh'
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines
...
