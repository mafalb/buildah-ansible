---
- name: BUILDAH | Test output of "buildah images <image_name>" command
  mafalb.buildah.buildah_images:
    name: registry.fedoraproject.org/fedora
    truncate: true
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | Test JSON output of "buildah images --json <image_name>" command
  mafalb.buildah.buildah_images:
    name: registry.fedoraproject.org/fedora
    json: true
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | Test output of "buildah images --no-trunc <image_name>" command
  mafalb.buildah.buildah_images:
    name: registry.fedoraproject.org/fedora
    truncate: false
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

# #######################  DOES NOT WORK YET ###################################
#   - name: BUILDAH | Test output of "buildah images <FORMAT> <image_name>" command
#     buildah_images:
#       name: registry.fedoraproject.org/fedora
#       format: 'ID: {{.ID}} Name: {{.Name}} Digest: {{.Digest}} Created: {{.CreatedAt}} Size: {{.Size}}'
#     register: result
#     tags:
#       - go

#   - debug: var=result.stdout_lines
#     tags:
#       - go
# #######################  DOES NOT WORK YET ###################################

- name: BUILDAH | Test output of "buildah images --noheading <image_name>" command
  mafalb.buildah.buildah_images:
    name: registry.fedoraproject.org/fedora
    heading: false
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | Test output of "buildah images --noheading <image_name>" command
  mafalb.buildah.buildah_images:
    name: registry.fedoraproject.org/fedora
    heading: true
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines

- name: BUILDAH | Test output of ALL "buildah images" command
  mafalb.buildah.buildah_images:
    name:    # Empty name: results in ALL images - REVISIT
  register: result

- name: BUILDAH | Debug
  ansible.builtin.debug:
    var: result.stdout_lines
...
